


<!DOCTYPE HTML>

<!-- (C) 2017-2018 Camiel Bouchier (CamielBouchier@hotmail.com) - All rights reserved -->


<html lang="nl">

    <head>


  	
            <meta charset="utf-8" />
            <meta name="viewport" content="width=device-width, initial-scale=1" />


            <title>Photivo</title>
            <link rel="icon" href="https://photivo.bouchier.be/img/favicon.ico" />
            
                <link href="https://photivo.bouchier.be/nl/feeds/all.atom.xml" type="application/atom+xml" rel="alternate" title="Photivo Full Atom Feed" />
        
                <link href="https://photivo.bouchier.be/nl/feeds/all.rss.xml" type="application/rss+xml" rel="alternate" title="Photivo Full RSS Feed" />
        
        
        
        
        
        
        
            <link rel="stylesheet" type="text/css" href="https://fonts.googleapis.com/css?family=Roboto:400,400italic,500,500italic,700,700italic" />
            <link rel="stylesheet" href="https://photivo.bouchier.be/theme/assets/css/main.css" />


            <script src="https://photivo.bouchier.be/js/jquery.min.js"></script>





    <meta property="og:description" content="Photivo - Creative photography" />
    <meta property="og:url"         content="https://photivo.bouchier.be/nl/pages/Dehaze-en.html" />
    <meta property="og:image"       content="https://photivo.bouchier.be/thumbnails/Manual/thumbnail_600x370.jpg" />
    <meta property="og:title"       content="Dehaze" />


	<script type="text/javascript">

    
    var disqus_config = function () {
        this.page.url = 'https://photivo.bouchier.be/nl/pages/Dehaze-en.html';
        this.page.identifier = '4f89fc6f733dd7725dace6e13372c6d0';
        this.page.title = 'Dehaze';
    };
    
    (function() {
        var d = document, s = d.createElement('script');
        
        s.src = 'https://photivo-nl.disqus.com/embed.js';
        
        s.setAttribute('data-timestamp', +new Date());
        (d.head || d.body).appendChild(s);
    })();

    </script>




    </head>

    <body>

        <div id="cbSite">
            <div id="cbSideBar" class="cbNoPrint"> 
    
                <header id="cbHeader">
                   
                    <h1><a href="https://photivo.bouchier.be/nl/pages/AboutPhotivo.html" rel="home"><img src="/img/ShortLogo.png">Photivo</a></h1>
                    <p class="cbSubTitle">Creative photography</p>
    				<a id="cbMenuToggle" href="#"></a>
    			</header>
     
                <nav id="cbNav">

                    <aside class="cbMenu">

                        <ul>
 
                            <li>
                                <form class="navbar-search" action="https://photivo.bouchier.be/nl/search.html" onsubmit="return validateForm(this.elements['q'].value);"> 
                                    <input type="text" class="search-query" placeholder="Search" name="q" id="tipue_search_input">
                                </form>
                            </li>

                            <hr>




                            <a href="https://photivo.bouchier.be/nl/index.html"><li>
                                Alle artikels</li></a>
                            <hr>

        

                            
    
                        </ul>
                    </aside>     
                    <aside class="cbSocial">
                        <span class="cbMail">
                            <a href="mailto://photivo@bouchier.be"></a>
                        </span>
                        <span class="cbFlickr">
                            <a href="https://www.flickr.com/groups/photivo/"></a>
                        </span>
                    </aside>
    
                    <aside class="cbRecentPosts">
                        <h3>Recente artikels</h3>
                        <ul> 
                        </ul>
                    </aside>

                    <aside class="cbRecentComments">
                        <h3>Recente reacties</h3>
                        <ul>
                            <li>
                                <script type="text/javascript" src="https://photivo-nl.disqus.com/recent_comments_widget.js?num_items=5&hide_mods=0&hide_avatars=0&avatar_size=32&excerpt_length=100"></script>
                                <hr>
                            </li>
                        </ul>
                    </aside>

                    <aside class="cbCategories">
                        <h3>Categorieën</h3>
                        <ul>
                        </ul>
                    </aside>

                    <aside class="cbTags">
                        <h3>Tags</h3>
                        <ul>
                        </ul>
                    </aside> 
                </nav>
    
            </div>      
            <div id="cbMainContainer">
    
                <main id="cbMain" role="main">


        <article class="cbWithThumb cbArticle">


            <style>
                #img_thumb
                    {
                    background-image    : url(https://photivo.bouchier.be/thumbnails/Manual/thumbnail_1200x800.jpg);
                    background-size     : cover;
                    background-position : center;
                    width               : 100%;
                    height              : 800px;
                    max-height          : 33vh;
                    }
            </style>

            <div class="cbPostThumb cbNoPrint" id="img_thumb" title="Photo by Hope House Press (https://unsplash.com/@hopehousepress)"></div>


        <header class="cbArticleHeader">

            <h2 class="cbArticleTitle">Dehaze</h2>

            <span class="cbPrint"><a href="javascript:window.print()">Print</a></span>

    	    <span class="cbDate">
                <a href="https://photivo.bouchier.be/nl/pages/Dehaze-en.html" rel="bookmark">
                    <time class="entry-date published" datetime="2012-01-01T00:00:00+01:00">2012-01-01</time>
                </a>
            </span>


                <span class="cbAuthor">
                        <a class="url fn" href="https://photivo.bouchier.be/nl/author/camiel-bouchier.html">Camiel Bouchier</a>
                </span>
   
                <span class="cbComments">
                    <a data-disqus-identifier="4f89fc6f733dd7725dace6e13372c6d0" href="https://photivo.bouchier.be/nl/pages/Dehaze-en.html#disqus_thread"></a>
                </span>
 

        </header> 
        <div class="cbArticleContent  cbJustify   "> 
            <p>
This tutorial shows how to deal with haze that plagues a lot of scenery photos. Dehazing relies on much of the same techniques as <a href="/en/pages/Manual/Tutorials/FakeHdr.html" class="wikilink1" title="tutorials:fake-hdr">Fake HDR</a>, since essentially the core of both is enhancing subtle detail. Also hazy photos tend to benefit from some fake-HDR enhancing as well. The general steps involved are:
</p>

<ul>
<li class="level1"><div class="li"> Use the whole histogram range,</div>
</li>
<li class="level1"><div class="li"> apply <em>local contrast</em> filters to enhance the subtle details remaining in the haze (this is the major task),</div>
</li>
<li class="level1"><div class="li"> probably <em>denoise</em> because we’re likely to be pushing the image hard with the brightness and contrast steps.</div>
</li>
<li class="level1"><div class="li"> Finally of course we apply all the eyecandy, sharpening, scaling, etc. we want for the final look. That’s not really part of dehazing anymore, though.</div>
</li>
</ul>

<p>
Our example image is a typical shot of the <a href="http://en.wikipedia.org/wiki/Machu_picchu" class="urlextern" title="http://en.wikipedia.org/wiki/Machu_picchu"  rel="nofollow">Inca town of Machu Picchu</a> in hazy conditions.
</p>

<p>
<a href="/media/Tutorials/dehaze/dehaze-camera-jpeg.jpg" class="media" title="/media/Tutorials/dehaze/dehaze-camera-jpeg.jpg"  rel="nofollow"><img src="/media/Tutorials/dehaze/dehaze-camera-jpeg.thumb.jpg" class="medialeft" title=" " alt="dehaze-camera-jpeg" /></a>
<a href="/media/Tutorials/dehaze/dehaze-end-result.jpg" class="media" title="/media/Tutorials/dehaze/dehaze-end-result.jpg"  rel="nofollow"><img src="/media/Tutorials/dehaze/dehaze-end-result.thumb.jpg" class="media" title=" " alt="dehaze-end-result" /></a>
</p>

<p>
The left image is the Jpeg straight from the camera. Especially note the lack of detail on the mountain range in the background. The back light situation (the sun is just to the left of the image) also doesn’t exactly improve things. On the right we see the final result. The mountain range and sky both gained a tremendous amount of detail. The same is true for the dark parts of the mountain peaks in the foreground.
</p>

<p>
Now, how to dehaze? First we need to understand that there is no single definite way. Some hazy images might turn out great with the exact settings from this tutorial. Others need a slightly different treatment. However, the basic steps are always the same. Just play with the settings and filters a bit until you reach a satisfying result.
</p>

<p>
When we open up the RAW image in Photivo with no active filters, it looks like this:
</p>

<p>
<a href="/media/Tutorials/dehaze/dehaze-photivo-unaltered-source.jpg" class="media" title="/media/Tutorials/dehaze/dehaze-photivo-unaltered-source.jpg"  rel="nofollow"><img src="/media/Tutorials/dehaze/dehaze-photivo-unaltered-source.thumb.jpg" class="media" title=" " alt="dehaze-photivo-unaltered-source" /></a>
</p>

<h3 class="sectionedit2" id="brighten">Brighten</h3>

<div class="level3">

<p>
Our first task is to make use of as much of the histogram range as possible to prepare for the following enhancing of every possible contrast. A great filter to achieve this is <strong>Brighten</strong> (Reinhard <a href="http://en.wikipedia.org/wiki/Tonemapping" class="urlextern" title="http://en.wikipedia.org/wiki/Tonemapping"  rel="nofollow">tonemapping</a>) on the <strong>RGB</strong> tab. <strong>Brightness</strong> controls the overall strength of the brighten effect, <strong>Light</strong> is useful for fine tuning the brightening, and <strong>Chrominance</strong> affects how warm or cold colours come out. For our example image <strong>Brighten</strong> with -30/1/0 settings works well.
</p>

<p>
<a href="/media/Tutorials/dehaze/dehaze-photivo-brighten.jpg" class="media" title="/media/Tutorials/dehaze/dehaze-photivo-brighten.jpg"  rel="nofollow"><img src="/media/Tutorials/dehaze/dehaze-photivo-brighten.thumb.jpg" class="media" title=" " alt="dehaze-photivo-brighten" /></a>
</p>

<p>
As we can see, the histogram is now spread a lot more nicely over the whole range. However, <strong>Brighten</strong> is not always the best choice. Especially for already quite bright images with haze all over the foreground and background <strong>Brighten</strong> tends to be too strong even at low settings. Then a simple <strong>Expose</strong> adjustment or brightening <strong>Basecurve</strong> (<strong>Output</strong> tab) can be the better alternative. We’ll just have to try what works best.
</p>

</div>

<h3 class="sectionedit3" id="dynamic_range_compression_and_contrast_enhancement">Dynamic Range Compression and Contrast Enhancement</h3>

<div class="level3">

<p>
The core part of dehazing happens on the <strong>Lab Color/Contrast</strong> tab. The first filter we need is <strong>Dynamic Range Compression</strong>, usually with <strong>Amount</strong> around 0.5 to 0.6. <strong>Bias</strong> controls the brightness and with <strong>Color Adaption</strong> we can counteract colour shifts introduced by the compression. Here is what the filter does:
</p>

<p>
<a href="/media/Tutorials/dehaze/dehaze-photivo-drc.jpg" class="media" title="/media/Tutorials/dehaze/dehaze-photivo-drc.jpg"  rel="nofollow"><img src="/media/Tutorials/dehaze/dehaze-photivo-drc.thumb.jpg" class="media" title=" " alt="dehaze-photivo-drc" /></a>
</p>

<p>
There’s two things to notice in comparison to the brighten step:
</p>
<ul>
<li class="level1"><div class="li"> The clouds, background mountain range and foreground mountain peaks gain a good bit of detail.</div>
</li>
<li class="level1"><div class="li"> The ruins in the foreground look awful, a lot worse than before.</div>
</li>
</ul>

<p>
However, this is exactly the input we need for the subsequent contrast filters. With those it’s time to experiment again, since what looks good here depends a lot on the actual image. As a general guideline:
</p>
<ul>
<li class="level1"><div class="li"> First try the halo based <strong>Local Contrast Stretch</strong>, start with high values for <strong>Opacity</strong> and <strong>Masking</strong> and play with those two sliders until artefacts disappear.</div>
</li>
<li class="level1"><div class="li"> Texture contrast is a useful addition or even an alternative to the local contrast stretch filter. <strong>Texture Contrast I</strong> is pre-set to enhance small detail, <strong>Texture Contrast II</strong> works on a larger scale. In the example I decided on a <strong>Texture curve</strong> (that also works on small details) to selectively push the details in the ruins.</div>
</li>
<li class="level1"><div class="li"> Most likely we need some additional global contrast as well, so let’s have a look at the <strong>Output</strong> tab. The most common way to push contrast here is to use the rather strong <strong>sRGB gamma compensation</strong>. However, for our example a more subtle approach with <strong>Sigmoidal contrast</strong> and 4.8/0.28 settings was the better solution.</div>
</li>
</ul>

<p>
With all of these filters we finally have a properly dehazed image.
</p>

<p>
<a href="/media/Tutorials/dehaze/dehaze-photivo-drc-and-contrast.jpg" class="media" title="/media/Tutorials/dehaze/dehaze-photivo-drc-and-contrast.jpg"  rel="nofollow"><img src="/media/Tutorials/dehaze/dehaze-photivo-drc-and-contrast.thumb.jpg" class="media" title=" " alt="dehaze-photivo-drc-and-contrast" /></a>
</p>

<p>
It’s not perfect yet. The colours are still too flat and the sky on the left appears too blown out. But solving those issues is not part of the dehazing. Since dehazing tends to push the image data close to the limit, some denoising and sharpening is probably required almost always. The rest is – again – playing around.
</p>

</div>

<h4 id="eyecandy_and_final_touches">Eyecandy and Final Touches</h4>

<div class="level4">

<p>
What to do to finish the process depends on the artistic choice of how we want the final image to look. On the two <strong>Eyecandy</strong> tabs I decided to use a soft <strong>Vignette</strong> for more pleasing picture corners and two <strong>Gradual overlays</strong> to darken the top left part of the image and to enhance the warm orange colours of the ruins in the foreground. Some sharpening and scaling to the final resolution complete the image.
</p>

<p>
<a href="/media/Tutorials/dehaze/dehaze-photivo-final-image.jpg" class="media" title="/media/Tutorials/dehaze/dehaze-photivo-final-image.jpg"  rel="nofollow"><img src="/media/Tutorials/dehaze/dehaze-photivo-final-image.thumb.jpg" class="media" title=" " alt="dehaze-photivo-final-image" /></a>
</p>

<p>
That concludes our dehazing tutorial. <img src="/lib/images/smileys/icon_wink.gif" class="icon" alt=";-)" /> I’m sure you have some pictures lying around your want to try this on!
</p>

</div>

<!--
vim: syntax=markdown ts=4 sw=4 sts=4 sr et columns=160 lines=32
-->
        </div> 
    </article>
 
        <div id="cbComments" class="cbComments">
	        <div id="disqus_thread"></div>
        </div>

                </main>
    
                <footer id="cbFooter" role="contentinfo" class="cbNoPrint">
                    <span>
                        Powered by <a class="cbUnderline" href="https://blog.getpelican.com">Pelican</a>.<br>2017-2018 Camiel Bouchier. All rights reserved.
    		        </span>
                </footer>
    
            </div>
        </div> 

        <script src="https://photivo.bouchier.be/theme/assets/js/skel.min.js"></script>
        <script src="https://photivo.bouchier.be/theme/assets/js/cbCms.js"></script>


        <script type="text/x-mathjax-config">
            MathJax.Hub.Register.StartupHook("End Jax",function ()
                {
                var BROWSER = MathJax.Hub.Browser;
                var jax = "HTML-CSS";
                if (BROWSER.isMSIE && BROWSER.hasMathPlayer) jax = "NativeMML";
                if (BROWSER.isFirefox) jax = "SVG";
                if (BROWSER.isChrome) jax = "SVG";
                if (BROWSER.isSafari && BROWSER.versionAtLeast("5.0")) jax = "NativeMML";
                // For the moment I have best cross-browser and reasonable results with just the preview.
                // I need to find out later for the mobile browsers if something can be done.
                jax = "PreviewHTML"
                return MathJax.Hub.setRenderer(jax);
                });
		    MathJax.Hub.Config(
			    {
			    jax : [ "output/SVG" ] ,
    		    "HTML-CSS" :
                    {
                    scale : 100
                    } ,
    		    "SVG" :
                    {
                    scale: 90
                    } ,
  			    });
	    </script>

        <script type="text/javascript" async src="https://cdn.mathjax.org/mathjax/latest/MathJax.js?config=TeX-MML-AM_CHTML"></script>

        <script id="dsq-count-scr" src="https://photivo-nl.disqus.com/count.js" async></script>

 

    </body>
</html>

